<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="keywords" content="Hexo Theme Redefine">
    <meta name="description" content="Hexo Theme Redefine">
    <meta name="author" content="小猪之最Thepig">
    <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-redefine.png">
    <!-- preconnect -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://evan.beee.top" crossorigin>
    
    <!--- Seo Part-->
    
    <link rel="canonical" href="https://www.pigest.top/2023/ltwtutor-e1/"/>
    <meta name="robots" content="index,follow">
    <meta name="googlebot" content="index,follow">
    <meta name="revisit-after" content="1 days">
    
        <meta name="description" content="一篇较详尽的《游艺街》地图修改教程">
<meta property="og:type" content="article">
<meta property="og:title" content="游艺街改版教程 - 添加新的小游戏">
<meta property="og:url" content="https://www.pigest.top/2023/ltwtutor-e1/index.html">
<meta property="og:site_name" content="小猪之最Thepig">
<meta property="og:description" content="一篇较详尽的《游艺街》地图修改教程">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://www.pigest.top/img/ltwtutor/ltwtutor1.png">
<meta property="og:image" content="https://www.pigest.top/img/ltwtutor/ltwtutor2.png">
<meta property="og:image" content="https://www.pigest.top/img/ltwtutor/ltwtutor3.png">
<meta property="og:image" content="https://www.pigest.top/img/ltwtutor/ltwtutor4.png">
<meta property="og:image" content="https://www.pigest.top/img/ltwtutor/ltwtutor5.png">
<meta property="og:image" content="https://www.pigest.top/img/ltwtutor/ltwtutor7.png">
<meta property="og:image" content="https://www.pigest.top/img/ltwtutor/ltwtutor8.png">
<meta property="og:image" content="https://www.pigest.top/img/ltwtutor/ltwtutor9.png">
<meta property="article:published_time" content="2023-04-10T15:39:26.000Z">
<meta property="article:modified_time" content="2023-04-20T16:00:31.203Z">
<meta property="article:author" content="小猪之最">
<meta property="article:tag" content="教程">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://www.pigest.top/img/ltwtutor/ltwtutor1.png">
    
    <!--- Icon Part-->
    <link rel="icon" type="image/png" href="/images/avatar.png" sizes="192x192">
    <link rel="apple-touch-icon" sizes="180x180" href="/images/avatar.png">
    <meta name="theme-color" content="#A31F34">
    <link rel="shortcut icon" href="/images/avatar.png">
    <!--- Page Info-->
    
    <title>
        
            游艺街改版教程 - 添加新的小游戏 -
        
        XIAOZHU ZHIZUI
    </title>
    
<link rel="stylesheet" href="/css/style.css">

    
<link rel="stylesheet" href="/assets/fonts.css">

    <!--- Font Part-->
    
    
    
        <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;500;700&display=swap" rel="stylesheet">
    
    

    <!--- Inject Part-->
    
    <script id="hexo-configurations">
    let Global = window.Global || {};
    Global.hexo_config = {"hostname":"www.pigest.top","root":"/","language":"zh-CN","path":"search.xml"};
    Global.theme_config = {"articles":{"style":{"font_size":"16px","line_height":1.5,"image_border_radius":"14px","image_alignment":"center"},"word_count":{"enable":true,"count":true,"min2read":true},"author_label":{"enable":true,"auto":false,"list":[""]},"code_block":{"copy":true,"style":"mac","font":{"enable":false,"family":null,"url":null}},"toc":{"enable":true,"max_depth":3,"number":false,"expand":true,"init_open":true},"copyright":true,"lazyload":true,"recommendation":{"enable":false,"title":"推荐阅读","limit":3,"placeholder":"/images/wallhaven-wqery6-light.webp","skip_dirs":[]}},"colors":{"primary":"#A31F34","secondary":null},"global":{"fonts":{"chinese":{"enable":true,"family":"Noto Serif SC","url":"https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;500;700&display=swap"},"english":{"enable":false,"family":null,"url":null}},"content_max_width":"1000px","sidebar_width":"210px","hover":{"shadow":true,"scale":false},"scroll_progress":{"bar":false,"percentage":true},"busuanzi_counter":{"enable":true,"site_pv":true,"site_uv":true,"post_pv":true},"pjax":true,"open_graph":true},"home_banner":{"enable":true,"image":{"light":"/images/light.png","dark":"/images/dark.png"},"title":"小猪之最Thepig","subtitle":{"text":["君子曰：学不可以已","一个Minecraft云玩家的个人博客"],"typing_speed":50,"backing_speed":40,"starting_delay":500,"backing_delay":2000,"loop":false,"smart_backspace":true},"text_color":{"light":"#ff6a6a","dark":"#ff6a6a"},"text_style":{"title_size":"2.8rem","subtitle_size":"1.5rem","line_height":1.2},"custom_font":{"enable":false,"family":null,"url":null},"social_links":{"enable":true,"links":{"github":"https://github.com/TmallKing1","bilibili":"https://space.bilibili.com/381671770"}}},"plugins":{"feed":{"enable":false},"aplayer":{"enable":false,"audios":[{"name":null,"artist":null,"url":null,"cover":null},{"name":null,"artist":null,"url":null,"cover":null}]},"mermaid":{"enable":false,"version":"9.3.0"}},"version":"2.1.0","navbar":{"auto_hide":false,"color":{"left":"#f78736","right":"#367df7","transparency":35},"links":{"Home":{"path":"/","icon":"fa-regular fa-house"},"Friends":{"path":"/links/","icon":"fa-solid fa-link"},"Tags":{"path":"/tags/","icon":"fa-solid fa-tags"}},"search":{"enable":true,"preload":true}},"page_templates":{"friends_column":2,"tags_style":"blur"},"home":{"sidebar":{"enable":true,"position":"left","announcement":null,"links":null},"article_date_format":"auto","categories":{"enable":true,"limit":3},"tags":{"enable":true,"limit":3}}};
    Global.language_ago = {"second":"%s 秒前","minute":"%s 分钟前","hour":"%s 小时前","day":"%s 天前","week":"%s 周前","month":"%s 个月前","year":"%s 年前"};
  </script>
    
    <!--- Fontawesome Part-->
    
<link rel="stylesheet" href="/fontawesome/fontawesome.min.css">

    
<link rel="stylesheet" href="/fontawesome/brands.min.css">

    
<link rel="stylesheet" href="/fontawesome/solid.min.css">

    
<link rel="stylesheet" href="/fontawesome/regular.min.css">

    
    
    
    
<meta name="generator" content="Hexo 6.3.0"></head>


<body>
<div class="progress-bar-container">
    

    
        <span class="pjax-progress-bar"></span>
        <span class="pjax-progress-icon">
            <i class="fa-solid fa-circle-notch fa-spin"></i>
        </span>
    
</div>


<main class="page-container">

    

    <div class="main-content-container">

        <div class="main-content-header">
            <header class="navbar-container">
    
    <div class="navbar-content">
        <div class="left">
            
            <a class="logo-title" href="/">
                
                XIAOZHU ZHIZUI
                
            </a>
        </div>

        <div class="right">
            <!-- PC -->
            <div class="desktop">
                <ul class="navbar-list">
                    
                        
                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class="" 
                                    href="/"  >
                                    
                                        
                                            <i class="fa-regular fa-house"></i>
                                        
                                        首页
                                    
                                </a>
                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class="" 
                                    href="/links/"  >
                                    
                                        
                                            <i class="fa-solid fa-link"></i>
                                        
                                        友情链接
                                    
                                </a>
                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class="" 
                                    href="/tags/"  >
                                    
                                        
                                            <i class="fa-solid fa-tags"></i>
                                        
                                        标签
                                    
                                </a>
                                <!-- Submenu -->
                                
                            </li>
                    
                    
                        <li class="navbar-item search search-popup-trigger">
                            <i class="fa-solid fa-magnifying-glass"></i>
                        </li>
                    
                </ul>
            </div>
            <!-- Mobile -->
            <div class="mobile">
                
                    <div class="icon-item search search-popup-trigger"><i class="fa-solid fa-magnifying-glass"></i></div>
                
                <div class="icon-item navbar-bar">
                    <div class="navbar-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Mobile drawer -->
    <div class="navbar-drawer">
        <ul class="drawer-navbar-list">
            
                
                    <li class="drawer-navbar-item flex-center">
                        <a class="" 
                        href="/"  >
                             
                                
                                    <i class="fa-regular fa-house"></i>
                                
                                首页
                            
                        </a>
                    </li>
                    <!-- Submenu -->
                    
            
                
                    <li class="drawer-navbar-item flex-center">
                        <a class="" 
                        href="/links/"  >
                             
                                
                                    <i class="fa-solid fa-link"></i>
                                
                                友情链接
                            
                        </a>
                    </li>
                    <!-- Submenu -->
                    
            
                
                    <li class="drawer-navbar-item flex-center">
                        <a class="" 
                        href="/tags/"  >
                             
                                
                                    <i class="fa-solid fa-tags"></i>
                                
                                标签
                            
                        </a>
                    </li>
                    <!-- Submenu -->
                    
            

        </ul>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="main-content-body">

            

            <div class="main-content">

                
                    <div class="fade-in-down-animation">
    <div class="post-page-container">
        <div class="article-content-container">

            
            
                <div class="article-title">
                    <h1 class="article-title-regular">游艺街改版教程 - 添加新的小游戏</h1>
                </div>
            
                
            

            
                <div class="article-header">
                    <div class="avatar">
                        <img src="/images/avatar.png">
                    </div>
                    <div class="info">
                        <div class="author">
                            <span class="name">小猪之最Thepig</span>
                            
                                <span class="author-label"></span>
                            
                        </div>
                        <div class="meta-info">
                            <div class="article-meta-info">
    <span class="article-date article-meta-item">
        <i class="fa-regular fa-pen-fancy"></i>&nbsp;
        <span class="desktop">2023-04-10 23:39:26</span>
        <span class="mobile">2023-04-10 23:39</span>
        <span class="hover-info">创建</span>
    </span>
    
        <span class="article-date article-meta-item">
            <i class="fa-regular fa-wrench"></i>&nbsp;
            <span class="desktop">2023-04-21 00:31</span>
            <span class="mobile">2023-04-21 00</span>
            <span class="hover-info">更新</span>
        </span>
    

    
    
        <span class="article-tags article-meta-item">
            <i class="fa-regular fa-tags"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/tags/%E6%95%99%E7%A8%8B/">教程</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    

    
    
        <span class="article-wordcount article-meta-item">
            <i class="fa-regular fa-typewriter"></i>&nbsp;<span>10.9k 字</span>
        </span>
    
    
        <span class="article-min2read article-meta-item">
            <i class="fa-regular fa-clock"></i>&nbsp;<span>45 分钟</span>
        </span>
    
    
</div>

                        </div>
                    </div>
                </div>
            

            <div class="article-content markdown-body">
                <h2 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h2><p>这是一个<strong>「由Hex-Dragon所制作的<a class="link"   target="_blank" rel="noopener" href="https://www.mcbbs.net/thread-1421715-1-1.html" >《游艺街》 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a>」</strong>的改版教程，作者是《游艺街 小猪之最改版服》（下简称《LTW派》）的作者小猪之最Thepig。</p>
<p>游艺街也出来一段时间了，但是改版里面目前貌似只有我这个版本还在维护……刚好新的最终轮游戏也做出来了，就先写篇教程解析一下龙猫他们写的数据包吧。本教程以《LTW派》的山丘之王游戏为例讲解。</p>
<p>注意本教程并不负责MC命令和数据包基础知识。</p>
<p>本教程的修改版数据包存放在<a class="link"   target="_blank" rel="noopener" href="https://github.com/TmallKing1/LTW3-RemakeTutorial" >GitHub <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a>上，包含了我制作的山丘之王小游戏的场景结构。你可以直接将《游艺街》的原版数据包替换为修改后的数据包然后删除原有的山丘之王结构来体验一下这个新的小游戏。<del>白嫖党狂喜</del></p>
<h2 id="官方的小游戏策划建议"><a href="#官方的小游戏策划建议" class="headerlink" title="官方的小游戏策划建议"></a>官方的小游戏策划建议</h2><p>以下内容来自函数文件<code>data/ltw/functions/main/player_enter.mcfunction</code>内的注释，我将其进行了一定的排版处理。</p>
<blockquote>
<p>小游戏最佳实践</p>
<ul>
<li>需要有<strong>玩家交互</strong><br>即使是间接交互也比没有好，<strong>PVP 击退</strong>可能是不错的选项，但最好不要纯 PVP 砍人</li>
<li>必须能体现玩家的<strong>技术或策略</strong><br>单纯的狂点左键或长按 W 是没有意思的，至少要给玩家发挥的空间</li>
<li>结果不能仅依靠玩家的熟练度<br>全靠玩家水平不是说不行，而是这不适合<strong>“派对游戏”</strong>，跑酷就是一个负面例子</li>
<li>规则应该尽量<strong>简单易学</strong><br>除非必要，不要增加单个游戏的规则复杂度，这会提高学习成本，让新人难以入门</li>
<li>在制作时考虑给<strong>道具</strong>留下发挥空间<br>玩家有远程攻击，有鞘翅，有金苹果，有护甲和剑，有击退棒，让它们可以得到应用</li>
</ul>
</blockquote>
<h2 id="第零步-准备工作"><a href="#第零步-准备工作" class="headerlink" title="第零步 - 准备工作"></a>第零步 - 准备工作</h2><h3 id="A-工具准备"><a href="#A-工具准备" class="headerlink" title="A. 工具准备"></a>A. 工具准备</h3><ol>
<li>在你的电脑上安装<a class="link"   target="_blank" rel="noopener" href="https://code.visualstudio.com/" >Visual Studio Code <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a>。</li>
<li>在VSCode里安装扩展<a class="link"   target="_blank" rel="noopener" href="https://marketplace.visualstudio.com/items?itemName=SPGoding.datapack-language-server" >Data-pack Helper Plus <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a>。</li>
<li>关闭VSCode，因为我们第二步才会用到它。</li>
</ol>
<h3 id="B-策划小游戏"><a href="#B-策划小游戏" class="headerlink" title="B. 策划小游戏"></a>B. 策划小游戏</h3><p>在开始制作之前肯定先要想好你的游戏玩法啦~这里给出山丘之王的规则参考：</p>
<p>比赛场地的中央平台地势较周围高，同时中央平台有一块<strong>红色区域</strong>，玩家可以通过楼梯到达中央红区。每<strong>0.25秒</strong>（在《LTW派》中是0.5秒），处在中央红区的玩家会获得1点能量值。当剩余时间小于1分钟时，获得的能量值提升为2点。每位玩家在中央区域都有一个附魔击退II的<strong>击退鱼</strong>，可用于击退其他玩家。<strong>在周围区域时</strong>，击退鱼的击退等级会变为IV级，可用于击退中央红区的玩家或阻止玩家到达中央红区。在游戏区域的四角会有<strong>奖励物资</strong>生成，玩家可以舍弃中央红区的能量值来尝试抢夺生成的奖励物资。</p>
<p>在《LTW派》中，奖励物资大多数情况是能量值，少数才会是全局物品（或积分）。教程中将仅演示生成全局物品（或积分）的奖励物资写法。</p>
<h2 id="第一步-小游戏场景的处理"><a href="#第一步-小游戏场景的处理" class="headerlink" title="第一步 - 小游戏场景的处理"></a>第一步 - 小游戏场景的处理</h2><p>游艺街各个小游戏的场景普遍比较小，并且如果你从主大厅切换旁观者模式朝外边飞，会发现游戏的场景原型都建在<strong>主大厅的外面</strong>。</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/img/ltwtutor/ltwtutor1.png"
                     
                ></p>
<p>但是我们在真正玩游戏的时候，并没有在游戏场景周围发现其他游戏的场景或者主大厅。这是因为在每轮游戏开始时，游戏场景都会用结构方块重新加载。从数据包中可以发现，我们游玩每个小游戏的位置都在<code>x=1000</code>且<code>z=1000n</code>（<code>n</code>为正整数）附近。</p>
<p>因为小游戏中的许多场景内的方块都会在游玩时发生改变（例如地陷圣坛），所以使用结构方块保存并<strong>在每局游戏开始前</strong>调用结构方块进行加载可以很轻松地使游戏场景恢复到最初的状态。即使你确信你的游戏场景不会被轻易改变，使用结构方块保存仍然可以减少测试中出现的不可抗力因素带来的影响。</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/img/ltwtutor/ltwtutor2.png"
                     
                ></p>
<p>你可以先在主大厅的附近建造一个场景，然后使用结构方块保存。保存的结构名称中的命名空间最好为<code>mini</code>，方便管理（例如山丘之王游戏的结构名称为<code>mini:koth</code>）。最后前往你的新游戏地点，例如<code>(1000,y,9000)</code>，然后放置结构方块并加载你的地图。</p>
<p>你也可以先在自己的世界把地图建造好并用结构方块保存，然后再前往你的存档文件夹，将<code>generated/structures/mini/xyz.nbt</code>文件复制到游艺街存档内相同的位置。</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/img/ltwtutor/ltwtutor3.png"
                     
                ></p>
<p>需要注意的是，原版的结构方块最多只能储存<strong>48x48x48</strong>的内容。如果你的游戏场景比最大范围还大，那就需要<strong>多个结构方块</strong>来储存（例如地陷圣坛）。</p>
<h2 id="第二步-小游戏基础框架编写"><a href="#第二步-小游戏基础框架编写" class="headerlink" title="第二步 - 小游戏基础框架编写"></a>第二步 - 小游戏基础框架编写</h2><p>使用VSCode打开游艺街数据包（<code>服务端文件夹/world/datapacks/LTW3</code>）。</p>
<p>看到我们熟悉的<code>data</code>文件夹和<code>pack.mcmeta</code>文件后，展开<code>data</code>文件夹，会发现里面有7个子文件夹（命名空间）。</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/img/ltwtutor/ltwtutor4.png"
                     
                ></p>
<p>以下为各个文件夹内文件的主要功能（可选择性阅读，我们修改的主要是mini文件夹的内容）：</p>
<ul>
<li><p>backup：备份文件夹。里面有一个压缩包文件<code>slime.zip</code>，储存的是官方废案小游戏《夺命足球》的函数文件。</p>
</li>
<li><p>item：与游戏内物品有关的文件夹，例如奖励积分、奖励物品、商店物品和游戏中锁定第九格物品栏等。存放奖励物品的战利品表也在这个文件夹里面。</p>
</li>
<li><p>lib：一些常用的函数库。例如<code>random</code>随机函数、<code>sounds</code>常用音效库等。</p>
</li>
<li><p>ltw：全局游戏相关文件夹。下面是其中<code>functions</code>文件夹中各个子文件夹和文件的介绍</p>
<ul>
<li><p><code>advancement</code>子文件夹表示玩家达成进度时执行的函数，即给予绿宝石+增加统计数据。在之后的进度编写中需要调用这些函数。</p>
</li>
<li><p><code>clock</code>子文件夹内为游戏中周期性执行的函数（tick1、tick2等），但我们要修改的并不是这里的内容。</p>
</li>
<li><p><code>main</code>子文件夹内是一些全局事件函数。</p>
</li>
<li><p><code>state</code>子文件夹里面的子文件夹表示服务器的各个状态：0表示等待中，3表示小游戏预处理，4表示展示小游戏，5表示小游戏进行中，6表示小游戏结束且选择奖励前，7表示选择奖励时。</p>
</li>
<li><p><code>init.mcfunction</code>函数可以重置服务器状态，测试时如果想重置可以输入命令<code>/function ltw:init</code>来重置服务器状态。</p>
</li>
</ul>
</li>
<li><p>minecraft：原版相关文件夹。因为游艺街服务器禁用了原版数据包，取消了原版进度和可直接通过获取物品获得合成表的功能，所以需要在minecraft命名空间内添加原版的一些内容。</p>
<ul>
<li>但是，<code>loot_tables/gameplay/fishing.json</code>似乎并不是原版的，原因你自己拿鱼竿钓一下鱼就知道了。</li>
</ul>
</li>
<li><p>mini：小游戏相关文件夹。里面存放了和各个小游戏相关的文件。我们所做的修改和添加都是围绕这个文件夹进行的。</p>
</li>
<li><p>test：测试相关文件夹。提供了测试各个小游戏和奖励物品、跳过剩余时间和将剩余时间设为「无限长」的方法。</p>
</li>
</ul>
<h3 id="A-新建文件夹！"><a href="#A-新建文件夹！" class="headerlink" title="A. 新建文件夹！"></a>A. 新建文件夹！</h3><p>俗话说的好，当你新建一个文件夹时，项目就正式开始了。</p>
<p>事不宜迟，我们立马建一个，在<code>mini/functions/</code>目录下。</p>
<blockquote>
<p>koth为King of The Hill（山丘之王）的简称。在此请为你自己的小游戏取一个<strong>相对短而好记</strong>的名称。</p>
</blockquote>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/img/ltwtutor/ltwtutor5.png"
                     
                ></p>
<p>在正式开始之前，先给你的小游戏取一个编号。<strong>小游戏分为三种类型</strong>：首轮小游戏、普通小游戏和终轮小游戏。</p>
<ul>
<li>首轮小游戏的编号为20*（例如核爆刺客为201）</li>
<li>普通小游戏的编号为*（例如地陷圣坛为2，月夜狩猎为5）</li>
<li>终轮小游戏的编号为10*（例如钢铁狂潮为101，贸易专家为102）</li>
</ul>
<p>如果你需要写一个普通小游戏，编号最好从6开始。当然，官方用过的编号只有1-5、101、102和201，你想定什么编号都可以。在此我将山丘之王的编号定为6。</p>
<h3 id="B-应该写什么？"><a href="#B-应该写什么？" class="headerlink" title="B. 应该写什么？"></a>B. 应该写什么？</h3><p>一个完整的小游戏应该至少包含以下函数文件：</p>
<ul>
<li><p><code>game_end.mcfunction</code>：<strong>游戏结束</strong>执行的方法。至少包含删除强制加载区块的命令。</p>
</li>
<li><p><code>game_init.mcfunction</code>：<strong>初始化</strong>。一般还要有<code>game_init2.mcfunction</code>用来清理残余实体，初始化操作复杂的游戏还要有<code>game_init3</code>、<code>game_init4</code>等等。</p>
</li>
<li><p><code>game_start.mcfunction</code>：<strong>游戏正式开始时</strong>执行的方法。</p>
</li>
<li><p><code>give_effect.mcfunction</code>：玩家进入游戏时会被给予的<strong>状态效果</strong>（夜视、抗性等等，视游戏类型不同而定）。</p>
</li>
<li><p><code>player_enter.mcfunction</code>：玩家进入游戏时，<strong>在玩家自己身上</strong>执行的方法。这里的玩家既包括游戏开始时服务器内的玩家，也包括游戏中途加入的玩家，因此需要对这两种玩家分别进行处理。</p>
</li>
<li><p><code>player_intro.mcfunction</code>：展示小游戏时，<strong>在每个玩家自己身上执行</strong>的方法。一般是将玩家传送到游戏场地、给予夜视和使用<code>tellraw</code>命令对玩家展示游戏规则三条命令。</p>
</li>
<li><p><code>tickx.mcfunction</code>：<strong>x为1、2、5或20</strong>。表示游戏过程中周期性执行的方法，例如tick1为每1游戏刻（约0.05秒）执行一次。一般的周期性命令都放在tick2中，每秒执行的命令放在tick20中。</p>
</li>
<li><p><code>watcher_limit.mcfunction</code>：<strong>限制旁观者的活动范围</strong>。如果没有这个方法，那么旁观者甚至可以在游戏时跑到主大厅去，并且会加载很多不必要的区块，影响服务器性能。</p>
<blockquote>
<p>实测直接用命令<code>/gamerule spectatorsGenerateChunks false</code>进行旁观者加载区块限制会出现bug，某些游戏结束后的区块不能正常加载。</p>
</blockquote>
</li>
</ul>
<p>这些只是必须有的文件。除此之外，<code>game</code>文件夹和一些其他的文件一般也会存在，用来封装特定游戏内的事件等。实际上，这些函数都是由<code>mini/main/</code>目录下的同名函数调用的。<strong>因此在你的文件夹添加这些函数时，确保在<code>mini/main/</code>目录下的函数内添加了调用这些函数的命令</strong>。例如：</p>
<p><code>data/mini/functions/main/game_init.mcfunction</code>：</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"># 计分板初始化</span><br><span class="line">scoreboard players reset * mini_score</span><br><span class="line">scoreboard players reset * mini_heart</span><br><span class="line">scoreboard players reset * health</span><br><span class="line"></span><br><span class="line"># 小游戏初始化</span><br><span class="line">execute if score $mini_type mem matches 1 run function mini:parkour/game_init</span><br><span class="line">execute if score $mini_type mem matches 2 run function mini:tntrun/game_init</span><br><span class="line">execute if score $mini_type mem matches 3 run function mini:hotpm/game_init</span><br><span class="line">execute if score $mini_type mem matches 4 run function mini:colormatch/game_init</span><br><span class="line">execute if score $mini_type mem matches 5 run function mini:phantom/game_init</span><br><span class="line">## 下面一行是你新添加的</span><br><span class="line">execute if score $mini_type mem matches 6 run function mini:koth/game_init</span><br><span class="line"></span><br><span class="line">execute if score $mini_type mem matches 201 run function mini:ass/game_init</span><br><span class="line">execute if score $mini_type mem matches 101 run function mini:iron/game_init</span><br><span class="line">execute if score $mini_type mem matches 102 run function mini:trade/game_init</span><br></pre></td></tr></table></figure></div>

<p>其他文件也类似，把game_init更换为对应的文件名即可。至于<code>main</code>文件夹内的这些函数是如何执行的，你无需多操心，因为龙猫他们已经把调用这些函数的方法写好了。</p>
<h3 id="C-游戏开始前的操作"><a href="#C-游戏开始前的操作" class="headerlink" title="C. 游戏开始前的操作"></a>C. 游戏开始前的操作</h3><p>首先找到你在第一步中放结构方块的地方，把它的坐标记下来。在我这里是<code>985 4 8985</code>。</p>
<p>然后在你的游戏场景附近找到一个与游戏场景大小相等或稍大的正方体，确保把你的游戏场景完全包括进去。<strong>记下正方体体对角线上的两个点的坐标</strong>，类似于你用WorldEdit等工具划范围。在我这里是<code>985 5 8985</code>和<code>1016 36 9016</code></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/img/ltwtutor/ltwtutor7.png"
                     
                ></p>
<p>然后编写旁观者范围限制和场景初始化命令。</p>
<p><code>data/mini/functions/koth/watcher_limit.mcfunction</code>：</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 观察者限制飞行范围</span><br><span class="line">## dx dy dz确定范围大小，可用确定的两点对应坐标相减获得这三个值</span><br><span class="line">execute as @a[gamemode=spectator] unless entity @s[x=986.0,y=5.0,z=8986.0,dx=30,dy=31,dz=30] run spectate</span><br><span class="line">execute as @a[gamemode=spectator] unless entity @s[x=986.0,y=5.0,z=8986.0,dx=30,dy=31,dz=30] run tp @s[team=!debugging] 1001.0 14 9001.0 -45 90</span><br></pre></td></tr></table></figure></div>

<p><code>data/mini/functions/koth/game_init.mcfunction</code>：</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 初始化山丘地图</span><br><span class="line">## 将游戏场景区域标记为强制加载，确保初始化操作的顺利进行</span><br><span class="line">forceload add 985 8985 1016 9016</span><br><span class="line">## 放置结构方块，用于生成游戏场景。这里的结构方块posX、posY、posZ配置应该与你在第一步中放置的结构方块一样</span><br><span class="line">setblock 985 4 8985 structure_block[mode=load]&#123;metadata: &quot;&quot;, mirror: &quot;NONE&quot;, ignoreEntities: 1b, powered: 0b, seed: 0L, rotation: &quot;NONE&quot;, posX: 0, posY: 1, posZ: 0, sizeX: 32, sizeY: 32, sizeZ: 32, mode: &quot;LOAD&quot;, integrity: 1.0f, showair: 0b, name: &quot;mini:koth&quot;&#125;</span><br><span class="line">## 在结构方块边上的一个方块处放置红石块用于激活结构方块。由于放置后红石块即被游戏场景取代，因此不需要考虑放置失败的问题</span><br><span class="line">setblock 985 5 8985 redstone_block</span><br></pre></td></tr></table></figure></div>

<p>接下来是对游戏全局的一些操作，加在上述命令的后面。</p>
<p><code>data/mini/functions/koth/game_init.mcfunction</code>：</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">## 设置游戏结束后排名显示中是否显示玩家所获得的小游戏内分数。这里山丘之王小游戏的排名是依照 HUD 右侧计分板显示的能量值排序的，因此游戏结束后可以对所有玩家显示分数（能量值）。若你的游戏为竞速类、死亡淘汰类或者其他不使用自定义分数排名的小游戏，请将该值设为0</span><br><span class="line">scoreboard players set $show_score mem 1</span><br><span class="line">## 重置奖励物品生成的冷却时间</span><br><span class="line">scoreboard players set $new_item_cd mem 0</span><br><span class="line">## 这是一个冒险模式小游戏，因此生存模式的值为0。如果你做的是一个生存模式小游戏，请将该值设为1，以防止系统锁定第九格物品栏。</span><br><span class="line">scoreboard players set $survival mem 0</span><br><span class="line">## 重置每0.1秒减少1的计时器，这条命令仅在你的游戏不需要使用这类计时器的情况下添加</span><br><span class="line">scoreboard players set $countdown_fast mem 0</span><br><span class="line">## 是否启用与遗迹寻宝小游戏中类似的节奏方块，如果你的场景中没有这类方块可以不写该命令</span><br><span class="line">scoreboard players set $tempo_enable mem 0</span><br></pre></td></tr></table></figure></div>

<p>如果你的游戏还有其他需要初始化的全局变量或玩家变量，一并写在<code>game_init.mcfunction</code>中。例如：</p>
<p><code>data/mini/functions/koth/game_init.mcfunction</code>：</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">## 重置能量值计分板</span><br><span class="line">scoreboard players reset * power_count</span><br></pre></td></tr></table></figure></div>

<p>如果你的游戏中出现了和我一样的<strong>原版游艺街没有出现过的</strong>计分项（例如<code>power_count</code>），需要在<code>init.mcfunction</code>中添加：</p>
<p><code>data/mini/functions/koth/init.mcfunction</code>：</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 重置计分板</span><br><span class="line">scoreboard objectives remove power_count</span><br><span class="line">scoreboard objectives add power_count dummy &quot;能量值&quot;</span><br></pre></td></tr></table></figure></div>

<p><code>data/mini/functions/main/init.mcfunction</code></p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># 初始化</span><br><span class="line">function mini:tntrun/init</span><br><span class="line">function mini:hotpm/init</span><br><span class="line">function mini:phantom/init</span><br><span class="line">## 山丘之王的初始化方法</span><br><span class="line">function mini:koth/init</span><br><span class="line"></span><br><span class="line">function mini:iron/init</span><br><span class="line">function mini:ass/init</span><br><span class="line">function mini:trade/init</span><br></pre></td></tr></table></figure></div>

<p>接下来是伤害管理：</p>
<p><code>data/mini/functions/main/game_init.mcfunction</code>：</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"># 伤害管理</span><br><span class="line">## 官方的函数中总有这一条，原本是用来控制消除金苹果/附魔金苹果/不死图腾产生的伤害吸收效果的，但是这个值设为0或1都会清除效果，所以设置这个值似乎并没有什么意义</span><br><span class="line">scoreboard players set $remove_resistance mem 0</span><br><span class="line">## 是否能够对玩家造成伤害与击退</span><br><span class="line">team modify playing friendlyFire true</span><br><span class="line">## 玩家碰撞设定</span><br><span class="line">team modify playing collisionRule always</span><br><span class="line">## 是否显示玩家的死亡信息</span><br><span class="line">team modify playing deathMessageVisibility never</span><br><span class="line">## 火焰伤害是否启用</span><br><span class="line">gamerule fireDamage false</span><br><span class="line">## 摔落伤害是否启用</span><br><span class="line">gamerule fallDamage false</span><br><span class="line">## 溺水伤害是否启用</span><br><span class="line">gamerule drowningDamage false</span><br><span class="line">## 自然生命恢复是否启用</span><br><span class="line">gamerule naturalRegeneration true</span><br></pre></td></tr></table></figure></div>

<p>接下来是剩余的初始化操作，一般是<strong>清理&#x2F;生成实体</strong>和<strong>对地图进行一定的初始化</strong>，放在上述初始化之后0.75秒进行。在山丘之王小游戏中只需要清理实体即可。</p>
<p><code>data/mini/functions/main/game_init.mcfunction</code>：</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">schedule function mini:koth/game_init2 15t replace</span><br></pre></td></tr></table></figure></div>

<p><code>data/mini/functions/main/game_init2.mcfunction</code>：</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 清理残余实体</span><br><span class="line">## 如果你的游戏中没有出现箭、物品、苦力怕和三叉戟以外的物品，直接调用mini:main中的清理实体方法即可</span><br><span class="line">function mini:main/kill_entity</span><br></pre></td></tr></table></figure></div>

<p>然后是对你的小游戏进行介绍，可以仿照官方写的介绍进行编写。「免疫击退效果在本轮无效」是无奈之举，一般的游戏需要尽量避免这种情况发生。</p>
<p><code>data/mini/functions/main/player_intro.mcfunction</code>：</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 向单个玩家展示小游戏介绍</span><br><span class="line">## 给予夜视效果</span><br><span class="line">effect give @s night_vision 1000000 0 true</span><br><span class="line">## 传送玩家到游戏场景</span><br><span class="line">tp @s[team=!debugging] 1001.0 14 9001.0 -45 90</span><br><span class="line">## 向玩家展示介绍</span><br><span class="line">tellraw @s [&quot;&quot;,&#123;&quot;text&quot;:&quot;\n &gt;&gt; 山丘之王 &gt;&gt;\n\n&quot;,&quot;color&quot;:&quot;gold&quot;,&quot;bold&quot;:true&#125;,&quot; 保持在红色区域即可 &quot;,&#123;&quot;text&quot;:&quot;获得能量值&quot;,&quot;color&quot;:&quot;gold&quot;&#125;,&quot;。\n 能量值最多的玩家即可获胜！\n\n&quot;,&#123;&quot;text&quot;: &quot; &lt;只能击退玩家&gt; &quot;,&quot;color&quot;:&quot;yellow&quot;&#125;,&#123;&quot;text&quot;: &quot; &lt;免疫击退效果在本轮无效&gt;&quot;,&quot;color&quot;:&quot;light_purple&quot;&#125;,&quot;\n&quot;]</span><br></pre></td></tr></table></figure></div>

<h3 id="D-游戏开始时的操作"><a href="#D-游戏开始时的操作" class="headerlink" title="D. 游戏开始时的操作"></a>D. 游戏开始时的操作</h3><p>主要包含三个方法。首先是游戏开始时对小游戏整体的修改。</p>
<p><code>data/mini/functions/main/game_start.mcfunction</code>：</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"># 游戏结束倒计时，我这里为120秒</span><br><span class="line">scoreboard players set $countdown mem 120</span><br><span class="line"></span><br><span class="line"># HUD，通常为玩家所看到的游戏相关信息</span><br><span class="line">scoreboard objectives setdisplay list power_count</span><br><span class="line">scoreboard objectives setdisplay belowName power_count</span><br><span class="line">scoreboard objectives setdisplay sidebar power_count</span><br><span class="line">## boss栏颜色，1，2，3，4分别代表红、黄、绿、蓝，0代表按照每个玩家在bossbar_color的计分项内的分数对每个玩家显示不同颜色的boss栏（例如炸弹狂魔里面获得炸弹与未获得炸弹的玩家看到的boss栏不一样）</span><br><span class="line">scoreboard players set $bossbar_color mem 4</span><br><span class="line">## boss栏倒计时的最大值</span><br><span class="line">scoreboard players set $countdown_max mem 120</span><br><span class="line">## boss栏类型，0，1，2分别代表关闭boss栏、显示快速倒计时（0.1秒减少1单位）和显示标准倒计时（1秒减少1单位）</span><br><span class="line">scoreboard players set $bossbar_type mem 2</span><br><span class="line">## 调用显示boss栏方法</span><br><span class="line">function lib:bossbar/show</span><br><span class="line">## 更改每种颜色的boss栏的名字</span><br><span class="line">bossbar set mini:red name &quot;剩余时间&quot;</span><br><span class="line">bossbar set mini:yellow name &quot;剩余时间&quot;</span><br><span class="line">bossbar set mini:blue name &quot;剩余时间&quot;</span><br></pre></td></tr></table></figure></div>

<p>接下来是每个玩家进入游戏时的方法。这里的玩家有三种：<strong>参与游戏的玩家</strong>（<code>team=playing,tag=!rejoining</code>）、<strong>未参与游戏的旁观者</strong>（<code>team=watching</code>）和<strong>中途退出而后又加入游戏的玩家</strong>（<code>team=playing,tag=rejoining</code>）。</p>
<p><code>data/mini/functions/main/player_enter.mcfunction</code>：</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"># 单个玩家开始小游戏时执行</span><br><span class="line">## 对自己播放音乐</span><br><span class="line">function lib:sounds/music/mini_middle</span><br><span class="line">## 清理标题显示区</span><br><span class="line">title @s clear</span><br><span class="line">title @s actionbar &quot;&quot;</span><br><span class="line"></span><br><span class="line"># 给予状态效果</span><br><span class="line">effect clear @s</span><br><span class="line">function mini:koth/give_effect</span><br><span class="line"></span><br><span class="line"># 设置玩家生命</span><br><span class="line">attribute @s generic.max_health base set 20</span><br><span class="line"></span><br><span class="line"># 传送玩家</span><br><span class="line">## 此处依据你设定的场景坐标而改。在我的游戏中玩家会出生在空中，因此会有以下这一条给予缓降效果的命令。传送玩家</span><br><span class="line">effect give @s[team=playing] slow_falling 3</span><br><span class="line">tp @s[team=playing] 1001.0 30.0 9001.0</span><br><span class="line"></span><br><span class="line"># 调整模式</span><br><span class="line">## 将调试者以外的玩家调整为旁观模式</span><br><span class="line">gamemode spectator @s[team=!debugging]</span><br><span class="line">## 将参与游戏而非中途重新加入的玩家调整为冒险模式</span><br><span class="line">gamemode adventure @s[team=playing,tag=!rejoining]</span><br><span class="line"></span><br><span class="line"># 解除免疫击退效果</span><br><span class="line">attribute @s[team=playing,tag=!rejoining] generic.knockback_resistance modifier add e0edf3eb-5aea-4a18-9b9e-1bde9df27ab5 &quot;&quot; -1.0 multiply</span><br></pre></td></tr></table></figure></div>

<p>解除免疫击退效果的影响是<strong>永久</strong>的，因此需要在玩家进入游戏时先<strong>取消免疫击退的限制</strong>，然后<strong>如果需要</strong>限制免疫击退才会执行上面的最后一条命令。如果你的游戏中没有这一项则不需要进行任何操作。</p>
<p><code>data/ltw/functions/main/player_enter.mcfunction</code>：</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># 存储UUID</span><br><span class="line">execute store result score @s UUID run data get entity @s UUID[0]</span><br><span class="line"></span><br><span class="line"># 解除限制免疫击退</span><br><span class="line">## 注意是在这里添加</span><br><span class="line">attribute @s[team=playing,tag=!rejoining] generic.knockback_resistance modifier remove e0edf3eb-5aea-4a18-9b9e-1bde9df27ab5</span><br><span class="line"></span><br><span class="line"># 如果是旁观者或局号不对头：开始旁观</span><br><span class="line">execute if entity @s[team=!playing] run function ltw:main/player_enter_watcher</span><br><span class="line">execute if entity @s[team=playing] unless score @s game_id = $ game_id run function ltw:main/player_enter_watcher</span><br><span class="line"># 如果不是旁观且局号正确：游戏中掉线</span><br><span class="line">execute if entity @s[team=playing] if score @s game_id = $ game_id run function ltw:main/player_enter_rejoin</span><br></pre></td></tr></table></figure></div>

<p>最后是给予玩家状态效果：</p>
<p><code>data/mini/functions/koth/give_effect.mcfunction</code>：</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 状态效果</span><br><span class="line">## 饱和</span><br><span class="line">effect give @s saturation 1000000 0 true</span><br><span class="line">## 夜视</span><br><span class="line">effect give @s night_vision 1000000 0 true</span><br><span class="line">## 抗性</span><br><span class="line">effect give @s resistance 1000000 4 true</span><br><span class="line">## 如果还有其它状态效果，加在下面即可</span><br></pre></td></tr></table></figure></div>

<h3 id="E-游戏结束时的操作"><a href="#E-游戏结束时的操作" class="headerlink" title="E. 游戏结束时的操作"></a>E. 游戏结束时的操作</h3><p>结束时的操作相对简单，只有一个<code>game_end.mcfunction</code>函数。</p>
<p><code>data/mini/functions/koth/game_end.mcfunction</code></p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># 当前游戏结束时触发</span><br><span class="line">## 取消在game_init.mcfunction定义的强制加载区域</span><br><span class="line">forceload remove 985 8985 1016 9016</span><br><span class="line"></span><br><span class="line"># 计算积分</span><br><span class="line">## 游艺街默认使用玩家淘汰的顺序来决定最终的排名，即每有一人淘汰时给剩余还在场上的玩家的mini_score分数加1。如果想要使用自定义的分数进行排名，直接把玩家对应的分数赋值给mini_score即可</span><br><span class="line">## 如果你在game_init.mcfunction设置了$show_score为1，在游戏结束后玩家的mini_score值会在排名列表里显示出来</span><br><span class="line">scoreboard players set @a[team=playing] mini_score 0</span><br><span class="line">execute as @a[team=playing] run scoreboard players operation @s mini_score += @s power_count</span><br><span class="line"></span><br><span class="line"># 解除限制免疫击退</span><br><span class="line">## 和之前一样，需要解除玩家的免疫击退限制，让玩家可以在其他游戏中正常使用免疫击退的道具（最好还是加上这句）</span><br><span class="line">execute as @a run attribute @s generic.knockback_resistance modifier remove e0edf3eb-5aea-4a18-9b9e-1bde9df27ab5</span><br></pre></td></tr></table></figure></div>

<h2 id="第三步-小游戏事件编写"><a href="#第三步-小游戏事件编写" class="headerlink" title="第三步 - 小游戏事件编写"></a>第三步 - 小游戏事件编写</h2><p>一个小游戏只有基础框架是没有任何实际内容的，<strong>甚至连游戏都无法正常结束</strong>。因此需要为每个小游戏编写自己的事件，这些事件一般会在<code>tick2.mcfunction</code>（每0.1秒执行）、<code>tick20.mcfunction</code>（每秒执行）等周期性执行的函数中触发。本教程只提供山丘之王小游戏的事件编写，但其中的某些内容（例如<strong>倒计时检测、奖励物品生成</strong>）也可用于其它小游戏。</p>
<h3 id="A-剩余10s时的倒计时显示"><a href="#A-剩余10s时的倒计时显示" class="headerlink" title="A. 剩余10s时的倒计时显示"></a>A. 剩余10s时的倒计时显示</h3><p>众所周知，大部分规定了剩余时间的游戏都会在剩余时间≤10秒时在subtitle副标题处显示倒计时。这个倒计时的写法直接照搬现成的即可。</p>
<p><code>data/mini/functions/koth/tick20.mcfunction</code>：</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 显示倒计时</span><br><span class="line">execute if score $countdown mem matches ..10 run title @a times 3 14 2</span><br><span class="line">execute if score $countdown mem matches ..10 run title @a subtitle &#123;&quot;score&quot;:&#123;&quot;name&quot;:&quot;$countdown&quot;,&quot;objective&quot;:&quot;mem&quot;&#125;&#125;</span><br><span class="line">execute if score $countdown mem matches ..10 run title @a title [&quot;&quot;]</span><br><span class="line">execute if score $countdown mem matches ..10 as @a at @s run function lib:sounds/hit2</span><br></pre></td></tr></table></figure></div>

<p>注意你<strong>不需要</strong>在tick20里面写倒计时减少的命令，因为龙猫已经在<code>data/ltw/functions/clock/tick20.mcfunction</code>里面给你写好了。</p>
<h3 id="B-倒计时事件"><a href="#B-倒计时事件" class="headerlink" title="B. 倒计时事件"></a>B. 倒计时事件</h3><p>山丘之王的倒计时事件有<strong>以下三个</strong>：</p>
<ol>
<li>剩余90秒时提示玩家30秒后开启双倍能量值。</li>
<li>剩余60秒时中央红区给予的能量值翻倍，变为2点。</li>
<li>剩余0秒时游戏结束。</li>
</ol>
<p>于是我们在<code>tick20.mcfunction</code>里加上各个事件的代码，加在倒计时显示的后面。</p>
<p><code>data/mini/functions/koth/tick20.mcfunction</code>：</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"># 90s：双倍提示</span><br><span class="line">execute if score $countdown mem matches 90 run title @a subtitle &#123;&quot;text&quot;:&quot;⚠ 双倍能量将在三十秒后开启！ ⚠&quot;,&quot;color&quot;:&quot;yellow&quot;&#125;</span><br><span class="line">execute if score $countdown mem matches 90 run title @a times 1 90 3</span><br><span class="line">execute if score $countdown mem matches 90 run title @a title &quot;&quot;</span><br><span class="line">## 更改bossbar颜色为黄色，下同</span><br><span class="line">execute if score $countdown mem matches 90 run scoreboard players set $bossbar_color mem 2</span><br><span class="line">## bossbar颜色更改需要重新调用show方法，下同</span><br><span class="line">execute if score $countdown mem matches 90 run function lib:bossbar/show</span><br><span class="line"></span><br><span class="line"># 60s：双倍开启</span><br><span class="line">## 这里不直接调整能量值的给予量，给予1点还是2点能量值会在tick5里面判定</span><br><span class="line">## 更改BGM</span><br><span class="line">execute if score $countdown mem matches 61 as @a run function lib:sounds/music/mini_fast</span><br><span class="line">execute if score $countdown mem matches 60 run title @a subtitle &#123;&quot;text&quot;:&quot;⚠ 双倍能量已开启！ ⚠&quot;,&quot;color&quot;:&quot;red&quot;&#125;</span><br><span class="line">execute if score $countdown mem matches 60 run title @a times 1 120 3</span><br><span class="line">execute if score $countdown mem matches 60 run title @a title &quot;&quot;</span><br><span class="line">execute if score $countdown mem matches 60 run scoreboard players set $bossbar_color mem 1</span><br><span class="line">execute if score $countdown mem matches 60 run function lib:bossbar/show</span><br><span class="line">## 播放音效</span><br><span class="line">execute if score $countdown mem matches 60 run playsound minecraft:entity.ender_dragon.growl player @a 0 900000 0 900000 1.5</span><br><span class="line"></span><br><span class="line"># 0s：游戏结束</span><br><span class="line">execute if score $countdown mem matches 0 run function mini:main/game_end</span><br></pre></td></tr></table></figure></div>

<p>如果你的游戏还有别的倒计时事件，需要<strong>一并在该函数里加上</strong>。</p>
<h3 id="C-能量值的给予"><a href="#C-能量值的给予" class="headerlink" title="C. 能量值的给予"></a>C. 能量值的给予</h3><p>每0.25秒给予游戏内的玩家1点（双倍能量时为2点）能量值。</p>
<p><code>data/mini/functions/koth/tick5.mcfunction</code>：</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 给予红区玩家能量值</span><br><span class="line">execute if score $countdown mem matches 61.. as @a[team=playing,tag=mini_running] at @s if block ~ 9 ~ red_mushroom_block run scoreboard players add @s power_count 1</span><br><span class="line">execute if score $countdown mem matches ..60 as @a[team=playing,tag=mini_running] at @s if block ~ 9 ~ red_mushroom_block run scoreboard players add @s power_count 2</span><br></pre></td></tr></table></figure></div>

<p>注意这里用了相对坐标与绝对坐标结合的写法，原因是我的中央红区方块全部是在<code>y=9</code>的位置，且中央红区方块为红色蘑菇块。</p>
<p>游戏中的玩家分为<code>team=playing,tag=!mini_running</code>和<code>team=playing,tag=mini_running</code>两种。前者表示<strong>已经淘汰或结束游戏的</strong>玩家（一般为旁观者模式），后者表示<strong>正在游玩的</strong>玩家。这里如果不对玩家进行限定会出现旁观者获得能量值的情况。</p>
<h3 id="D-游戏物品的给予"><a href="#D-游戏物品的给予" class="headerlink" title="D. 游戏物品的给予"></a>D. 游戏物品的给予</h3><p>游戏内需要用到的物品一般不会多于1个，且均放在快捷栏第9格。这是一个需要<strong>高频触发</strong>的事件，因为需要时刻检测玩家的快捷栏第9格是否是<strong>对应的物品</strong>（击退鱼），以及击退等级是否符合要求等等。</p>
<p>除此之外，如果玩家快捷栏第9格放入了<strong>其他的物品</strong>，我们还需要将该物品<strong>返还</strong>给玩家。幸运的是，这个复杂的返还方法龙猫已经帮我们写好了，但我们仍然需要<strong>调用这个方法</strong>来实现物品返还。</p>
<p>由于它比较复杂，我们通常把游戏物品的给予放在<code>tick2.mcfunction</code>里面，且用一个专门的函数处理该事件。</p>
<p><code>data/mini/functions/koth/tick2.mcfunction</code>：</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 给予击退鱼</span><br><span class="line">execute as @a[tag=mini_running] at @s if block ~ 9 ~ red_mushroom_block unless data entity @s Inventory[&#123;Slot:8b,id:&quot;minecraft:cod&quot;,tag:&#123;game_item:1b,powerful:0b&#125;&#125;] run function mini:koth/game/give_fish</span><br><span class="line">execute as @a[tag=mini_running] at @s unless block ~ 9 ~ red_mushroom_block unless data entity @s Inventory[&#123;Slot:8b,id:&quot;minecraft:cod&quot;,tag:&#123;game_item:1b,powerful:1b&#125;&#125;] run function mini:koth/game/give_fish</span><br></pre></td></tr></table></figure></div>

<p>在这里，我们使用了<code>powerful</code>这个<strong>自定义标签</strong>来区分击退鱼等级是否正确。当然你也可以直接用<code>tag:&#123;game_item:1b,Enchantments:[&#123;id:&quot;minecraft:knockback&quot;,lvl:4&#125;]&#125;</code>来区分不同等级的击退鱼，但这样相对耗性能并且不利于平衡调整（你需要把<code>give_fish</code>里面的鱼和<code>tick2</code>里面的鱼都改一下）。</p>
<p>游戏物品拥有一个<code>game_item:1b</code>的NBT标签，但由于鳕鱼这个物品<strong>不在LTW设定的游戏物品列表里</strong>，因此我们需要在游戏物品列表中把它加上，来保证游戏物品<strong>在游戏结束之后能够正常被清除</strong>。</p>
<p><code>data/mini/tags/game_item.json</code>：</p>
<div class="highlight-container" data-rel="Json"><figure class="iseeu highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;values&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;......（省略前面的游戏物品列表）&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;minecraft:soul_soil&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;minecraft:tnt&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;minecraft:cod&quot;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></div>

<p>接下来就是给予击退鱼的方法了。</p>
<p><code>data/mini/functions/koth/game/give_fish.mcfunction</code>：</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># 清除玩家已有的击退鱼</span><br><span class="line">clear @s cod&#123;game_item: 1b&#125;</span><br><span class="line"></span><br><span class="line"># 返还格子上的物品</span><br><span class="line">## 此处设定需要返还的物品栏位，快捷栏第九格为8</span><br><span class="line">execute if data entity @s Inventory[&#123;Slot: 8b&#125;] run scoreboard players set @s item_slot 8</span><br><span class="line">## 此处调用返还物品方法，没有物品时不会返还任何东西</span><br><span class="line">execute if data entity @s Inventory[&#123;Slot: 8b&#125;] at @s run function item:pop_slot/return_item</span><br><span class="line"></span><br><span class="line"># 依据玩家位置给予击退鱼</span><br><span class="line">execute if block ~ 9 ~ red_mushroom_block run item replace entity @s hotbar.8 with cod&#123;game_item: 1b, powerful: 0b, display: &#123;Name: &#x27;&#123;&quot;text&quot;:&quot;击退鱼&quot;,&quot;color&quot;:&quot;aqua&quot;,&quot;italic&quot;:false&#125;&#x27;&#125;, Enchantments: [&#123;id: &quot;knockback&quot;, lvl: 2&#125;], AttributeModifiers: [&#123;UUID: [I; 2, 0, 2, 1], Amount: 15, AttributeName: &quot;generic.attack_damage&quot;, Name: &quot;attack&quot;, Slot: &quot;mainhand&quot;, Operation: 0&#125;], HideFlags: 63&#125;</span><br><span class="line">execute unless block ~ 9 ~ red_mushroom_block run item replace entity @s hotbar.8 with cod&#123;game_item: 1b, powerful: 1b, display: &#123;Name: &#x27;&#123;&quot;text&quot;:&quot;强力击退鱼&quot;,&quot;color&quot;:&quot;light_purple&quot;,&quot;italic&quot;:false&#125;&#x27;&#125;, Enchantments: [&#123;id: &quot;knockback&quot;, lvl: 4&#125;], AttributeModifiers: [&#123;UUID: [I; 2, 0, 2, 1], Amount: 15, AttributeName: &quot;generic.attack_damage&quot;, Name: &quot;attack&quot;, Slot: &quot;mainhand&quot;, Operation: 0&#125;], HideFlags: 63&#125;</span><br></pre></td></tr></table></figure></div>

<p>由于盾牌在防击退方面表现十分出色，<del>因此我们需要让击退鱼有一定的破盾功效（暴力破盾）</del>。你可以删掉击退鱼的<code>AttributeModifiers</code>标签。</p>
<p>其他物品的给予方法和这里的击退鱼类似，只需要替换你需要用到的游戏物品即可。</p>
<h3 id="E-奖励物品的生成与处理"><a href="#E-奖励物品的生成与处理" class="headerlink" title="E. 奖励物品的生成与处理"></a>E. 奖励物品的生成与处理</h3><p>在LTW中，生成奖励物品需要一定的条件。例如在色彩迷阵中，需要<strong>当前场上没有物品</strong>才会开始计算生成物品的冷却。冷却到15秒后需要<strong>存活玩家数大于等于3</strong>且<strong>死亡玩家数小于等于2</strong>才生成新的奖励物品。但山丘之王中由于玩家不会死亡，所以只需要判定<strong>当前场上没有物品</strong>，然后计算冷却即可。</p>
<p>是否符合奖励物品的生成条件<strong>每秒判断一次</strong>。注意这里是在不符合条件时将<code>#new_item</code>设置为1，而不是在符合条件时设置为0。</p>
<p><code>data/mini/functions/koth/tick20.mcfunction</code>：</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># 判断是否符合刷出新物品的条件：0 为可以，其他为不可以</span><br><span class="line">scoreboard players set #new_item mem 0</span><br><span class="line"></span><br><span class="line"># 当前场地上没有物品</span><br><span class="line">execute if entity @e[tag=bonus_item,x=985.0,y=4.0,z=8985.0,dx=32,dy=32,dz=32] run scoreboard players set #new_item mem 1</span><br><span class="line"></span><br><span class="line"># 如果没有物品，则计算冷却</span><br><span class="line">execute if score #new_item mem matches 0 run scoreboard players add $new_item_cd mem 1</span><br><span class="line"># 已经超过 15s 冷却时间</span><br><span class="line">execute if score $new_item_cd mem matches ..14 run scoreboard players set #new_item mem 1</span><br><span class="line"></span><br><span class="line"># 如果上述条件均满足，则刷出新物品</span><br><span class="line">execute if score #new_item mem matches 0 run function mini:koth/game/new_item</span><br></pre></td></tr></table></figure></div>

<p>奖励物品的生成方法如下。由于山丘之王有四个物品生成点，每次生成只有2个生成点有物品，因此需要<strong>随机选择</strong>。生成奖励物品的方法比较常用，因此可以直接调用现成的，只需要更改物品生成的位置即可。</p>
<p><code>data/mini/functions/koth/game/new_item.mcfunction</code>：</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"># 重置冷却时间</span><br><span class="line">scoreboard players set $new_item_cd mem 0</span><br><span class="line"></span><br><span class="line"># 随机选择生成组</span><br><span class="line">scoreboard players set $random_min mem 0</span><br><span class="line">scoreboard players set $random_max mem 1</span><br><span class="line">function lib:random</span><br><span class="line"></span><br><span class="line"># 生成物资</span><br><span class="line">execute if score $random mem matches 0 positioned 1014.5 16 8987.5 run function item:bonus_item/gameparty/auto/low</span><br><span class="line">execute if score $random mem matches 0 positioned 987.5 16 9014.5 run function item:bonus_item/gameparty/auto/low</span><br><span class="line">execute if score $random mem matches 1 positioned 1014.5 16 9014.5 run function item:bonus_item/gameparty/auto/low</span><br><span class="line">execute if score $random mem matches 1 positioned 987.5 16 8987.5 run function item:bonus_item/gameparty/auto/low</span><br><span class="line">execute as @e[tag=bonus_item] run data modify entity @s NoGravity set value 0b</span><br><span class="line"></span><br><span class="line"># 显示提示</span><br><span class="line">title @a subtitle &#123;&quot;text&quot;:&quot;❇ 奖励物资已在空中部署 ❇&quot;,&quot;color&quot;:&quot;aqua&quot;&#125;</span><br><span class="line">title @a times 1 60 3</span><br><span class="line">title @a title &quot;&quot;</span><br><span class="line">tellraw @a [&quot;&quot;,&#123;&quot;text&quot;: &quot;&gt;&gt; &quot;,&quot;color&quot;:&quot;aqua&quot;,&quot;bold&quot;: true&#125;,&#123;&quot;text&quot;:&quot;奖励物资：&quot;,&quot;color&quot;:&quot;aqua&quot;&#125;,&#123;&quot;selector&quot;: &quot;@e[tag=bonus_item]&quot;&#125;]</span><br><span class="line">playsound minecraft:entity.player.levelup player @a 0 1000000 0 1000000 2</span><br></pre></td></tr></table></figure></div>

<p>山丘之王的物品是在y&#x3D;16生成的，我们需要让物品<strong>缓慢下落到某个位置停下来</strong>，但又不是完全不下落。由于物品会受到空气阻力，所以当物品不受重力时<strong>下落速度会逐渐减小</strong>。所以我们可以判定<strong>物品的下落速度和物品的y坐标</strong>来确定物品是否要受到重力影响以下落。这需要<strong>非常高频的判定</strong>，因此命令需要写在<code>tick1</code>里面。</p>
<p><code>data/mini/functions/koth/tick1.mcfunction</code>：</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 调整物品：仅在纵向速度 &lt; -0.015 且 y &gt; 12 时，才将 NoGravity 设置为 false</span><br><span class="line">execute as @e[tag=bonus_item] store result score @s temp run data get entity @s Motion[1] 1000</span><br><span class="line">execute as @e[tag=bonus_item] if entity @s[x=985.0,y=12.0,z=8985.0,dx=32,dy=32,dz=32,scores=&#123;temp=-15..&#125;] run data merge entity @s &#123;NoGravity: 0b&#125;</span><br><span class="line">execute as @e[tag=bonus_item] unless entity @s[x=985.0,y=12.0,z=8985.0,dx=32,dy=32,dz=32,scores=&#123;temp=-15..&#125;] run data merge entity @s &#123;NoGravity: 1b&#125;</span><br></pre></td></tr></table></figure></div>

<p>至于y大于几时才让物品受到重力影响，可以采用<code>地面坐标y值+3</code>的方法来确定这个y值（例如山丘之王奖励物品对应的地面坐标y值为9）。这样物品停止时会悬浮在地面上1-2个方块左右的位置。</p>
<h2 id="第四步-初步测试"><a href="#第四步-初步测试" class="headerlink" title="第四步 - 初步测试"></a>第四步 - 初步测试</h2><p>在确保你的<code>data/mini/functions/koth</code>下的<strong>模板函数</strong>（即你在第二步编写的函数以及<code>tick1</code>、<code>tick2</code>、<code>tick5</code>还有<code>tick20</code>）均在<code>data/mini/functions/main</code>中的同名函数有<strong>对应的调用方法</strong>后（参照第二步B），就可以开始初步测试你的新游戏了。</p>
<p>首先让我们复制粘贴一个测试方法，记得把<code>$mini_type</code>的值改为你的游戏编号。</p>
<p><code>data/test/functions/mini/koth.mcfunction</code>：</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># 测试用：快速开始山丘之王</span><br><span class="line">team join playing @a[team=watching]</span><br><span class="line">clear @a[team=!debugging]</span><br><span class="line">function ltw:state/0/start_game</span><br><span class="line">scoreboard players set $round mem 5</span><br><span class="line">scoreboard players set $mini_type mem 6</span><br><span class="line">function mini:main/game_init</span><br><span class="line">function ltw:state/4/state_enter</span><br><span class="line">say 已开始单个测试游戏！</span><br><span class="line"></span><br><span class="line">schedule function test:countdown/quick 20t</span><br></pre></td></tr></table></figure></div>

<p>先别急着在服务器里输入<code>/reload</code>命令！因为游艺街内置一个<strong>游戏结束判定</strong>，即人数等于1时游戏会自动结束（遗迹寻宝除外）。因此如果你是在一个人测试这个新游戏，那么游戏就会<strong>在开始之后的一瞬间结束</strong>！为了防止这种现象的发生，我们需要更改游戏结束的判定代码。在原有的<code>run</code>前面加上一句<code>unless score $mini_type mem matches 6</code>，这样你的游戏就不会自动结束了。</p>
<p><code>data/mini/functions/main/check_game_end.mcfunction</code>：</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 检查游戏是否可以结束</span><br><span class="line"></span><br><span class="line">function mini:main/update_player_count</span><br><span class="line">execute if score $state mem matches 5 if score $player_alive mem matches ..1 unless score $mini_type mem matches 1 unless score $mini_type mem matches 6 run function mini:main/game_end</span><br></pre></td></tr></table></figure></div>

<p>好了，现在可以<code>/reload</code>了。重载数据包之后，记得再输入<code>/function ltw:init</code>命令，确保你的能量值记分板添加成功。<del>（我就是因为经常忘记<code>init</code>导致写的东西老出bug）</del></p>
<p>输入<code>/function test:mini/koth</code>来开始测试你的游戏。下面给一张测试时的初始化图。</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/img/ltwtutor/ltwtutor8.png"
                     
                ></p>
<p>经测试<strong>游戏运行逻辑正确、奖励物品可以正常生成并且游戏可以正常结束</strong>后，初步测试就完成了。</p>
<h2 id="第五步-将新游戏加入随机池"><a href="#第五步-将新游戏加入随机池" class="headerlink" title="第五步 - 将新游戏加入随机池"></a>第五步 - 将新游戏加入随机池</h2><p>你写的新游戏目前还不能被随机到。但好在我们写的是一个普通小游戏，只需要更改一个数字即可实现将小游戏加入随机池。</p>
<p><code>data/ltw/functions/init.mcfunction</code>：</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 常量与变量初始化</span><br><span class="line">## 把这里的5改成6</span><br><span class="line">scoreboard players set #mini_total mem 6</span><br><span class="line">scoreboard players set #-1 mem -1</span><br><span class="line">scoreboard players set #0 mem 0</span><br><span class="line">scoreboard players set #1 mem 1</span><br><span class="line">scoreboard players set #2 mem 2</span><br></pre></td></tr></table></figure></div>

<p>然后输入<code>/function ltw:init</code>即可。现在当游戏正常开始时，你的游戏也有概率被轮换到了。注意如果你还要添加第7个、第8个普通小游戏，那么在初步测试之后也要更改这里的<code>#mini_total</code>值。</p>
<p>如果你做的不是一个普通小游戏，而是首轮&#x2F;终轮小游戏，那么你需要更改的函数<strong>不是上面这个</strong>，是状态3（小游戏预处理）的状态进入函数。下面是你需要改的原本的代码。</p>
<p><code>data/ltw/functions/state/3/state_enter.mcfunction</code>：</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># 前置/后置小游戏</span><br><span class="line"># 如果为第 1 轮，则有一半概率选用刺客，一半概率不变</span><br><span class="line"># 如果为第 5 轮，则有一半概率选用钢铁，一半概率选用贸易</span><br><span class="line">scoreboard players set $random_max mem 1</span><br><span class="line">scoreboard players set $random_min mem 0</span><br><span class="line">function lib:random</span><br><span class="line">execute if score $round mem matches 1 if score $random mem matches 0 run scoreboard players set $mini_type mem 201</span><br><span class="line">execute if score $round mem matches 5 if score $random mem matches 0 run scoreboard players set $mini_type mem 101</span><br><span class="line">execute if score $round mem matches 5 if score $random mem matches 1 run scoreboard players set $mini_type mem 102</span><br></pre></td></tr></table></figure></div>

<p>在我的《LTW派》中，是这么改的。（游戏编号202为掘一死箭，103为钻石风暴，104为富翁之路）</p>
<p><code>data/ltw/functions/state/3/state_enter.mcfunction</code>：</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># 前置/后置小游戏</span><br><span class="line"># 如果为第 1 轮，则有 40% 概率选用刺客，40% 概率选用掘战，20% 概率不变</span><br><span class="line"># 如果为第 6 轮，则有 20% 概率选用钢铁，20% 概率选用钻石，20% 概率选用贸易，40% 概率选用富翁之路</span><br><span class="line">scoreboard players set $random_max mem 5</span><br><span class="line">scoreboard players set $random_min mem 1</span><br><span class="line">function lib:random</span><br><span class="line">execute if score $round mem matches 1 if score $random mem matches 1..2 run scoreboard players set $mini_type mem 201</span><br><span class="line">execute if score $round mem matches 1 if score $random mem matches 2..3 run scoreboard players set $mini_type mem 202</span><br><span class="line">execute if score $round mem matches 6 if score $random mem matches 1 run scoreboard players set $mini_type mem 101</span><br><span class="line">execute if score $round mem matches 6 if score $random mem matches 2 run scoreboard players set $mini_type mem 102</span><br><span class="line">execute if score $round mem matches 6 if score $random mem matches 3 run scoreboard players set $mini_type mem 103</span><br><span class="line">execute if score $round mem matches 6 if score $random mem matches 4..5 run scoreboard players set $mini_type mem 104</span><br></pre></td></tr></table></figure></div>

<p>由此可见，只需要更改<code>$random</code>的最大值，并且按照概率计算<code>$random</code>取何值时应该将<code>$mini_type</code>设置为你的新游戏即可。</p>
<h2 id="第六步-添加进度"><a href="#第六步-添加进度" class="headerlink" title="第六步 - 添加进度"></a>第六步 - 添加进度</h2><p>进度系统允许玩家在达成一定的条件后获得绿宝石奖励。需要注意的是，进度一般要在你的游戏经过多人确认<strong>几乎没有影响游戏平衡的bug</strong>后才添加。</p>
<p>《游艺街》的所有可见进度均存放在<code>data/ltw/advancements/</code>文件夹中。分为<code>blood</code>（金铁交鸣）、<code>parkour</code>（飞檐走壁）、<code>story</code>（荣誉之路）和<code>vs</code>（百般绝学）四个子文件夹。你可以<strong>根据你的游戏主要玩法</strong>来选择进度需要存放的文件夹位置。山丘之王的进度将会存放在<code>vs</code>子文件夹中。</p>
<p>大部分的游戏包含α、β、γ和Ω四个进度，α进度给予1个绿宝石，β、γ进度分别给予2个绿宝石，Ω进度为隐藏进度，在有的游戏中不存在。我们只需要编写各个进度的描述以及达成条件即可，给予绿宝石的方法龙猫已经帮我们写好了。</p>
<blockquote>
<p> 这里的进度达成条件与《LTW派》中的不同，原因是《LTW派》中的山丘之王有给予能量值的奖励物品，以及中央红区的能量值增长速度较教程中慢一倍。</p>
</blockquote>
<p>如果你想copy and paste，你需要更改的进度的名称（koth改为你的小游戏英文代号），<code>parent</code>也需要一并更改。此外你通常需要更改<code>display</code>里面的<code>icon</code>、<code>title</code>、<code>description</code>三个键的值。达成进度的条件均写<code>impossible</code>，我们会在函数文件中写给予进度的代码。</p>
<p><code>data/ltw/advancements/vs/koth1.json</code>：</p>
<div class="highlight-container" data-rel="Json"><figure class="iseeu highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;parent&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ltw:vs/root&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;display&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;icon&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;item&quot;</span><span class="punctuation">:</span> <span class="string">&quot;minecraft:cod&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;山丘之霸 · α &quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span><span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;【山丘之王】获得 100 能量值\n&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;color&quot;</span><span class="punctuation">:</span><span class="string">&quot;gray&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span><span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;奖励: &quot;</span><span class="punctuation">,</span><span class="attr">&quot;color&quot;</span><span class="punctuation">:</span><span class="string">&quot;green&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span><span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1 绿宝石&quot;</span><span class="punctuation">,</span><span class="attr">&quot;color&quot;</span><span class="punctuation">:</span><span class="string">&quot;white&quot;</span><span class="punctuation">&#125;</span></span><br><span class="line">      <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;frame&quot;</span><span class="punctuation">:</span> <span class="string">&quot;task&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;show_toast&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;announce_to_chat&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;hidden&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;rewards&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;function&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ltw:advancement/bonus_1&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;criteria&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;a&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span></span><br><span class="line">          <span class="attr">&quot;trigger&quot;</span><span class="punctuation">:</span> <span class="string">&quot;minecraft:impossible&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></div>

<p><code>data/ltw/advancements/vs/koth2.json</code>：</p>
<div class="highlight-container" data-rel="Json"><figure class="iseeu highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;parent&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ltw:vs/koth1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;display&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;icon&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;item&quot;</span><span class="punctuation">:</span> <span class="string">&quot;minecraft:salmon&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;山丘之霸 · β &quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span><span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;【山丘之王】获得 180 能量值\n&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;color&quot;</span><span class="punctuation">:</span><span class="string">&quot;gray&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span><span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;奖励: &quot;</span><span class="punctuation">,</span><span class="attr">&quot;color&quot;</span><span class="punctuation">:</span><span class="string">&quot;green&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span><span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2 绿宝石&quot;</span><span class="punctuation">,</span><span class="attr">&quot;color&quot;</span><span class="punctuation">:</span><span class="string">&quot;white&quot;</span><span class="punctuation">&#125;</span></span><br><span class="line">      <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;frame&quot;</span><span class="punctuation">:</span> <span class="string">&quot;task&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;show_toast&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;announce_to_chat&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;hidden&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;rewards&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;function&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ltw:advancement/bonus_2&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;criteria&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;a&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span></span><br><span class="line">          <span class="attr">&quot;trigger&quot;</span><span class="punctuation">:</span> <span class="string">&quot;minecraft:impossible&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></div>

<p><code>data/ltw/advancements/vs/koth3.json</code>：</p>
<div class="highlight-container" data-rel="Json"><figure class="iseeu highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;parent&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ltw:vs/koth2&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;display&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;icon&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;item&quot;</span><span class="punctuation">:</span> <span class="string">&quot;minecraft:tropical_fish&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;山丘之霸 · γ &quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span><span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;【山丘之王】获得 250 能量值\n&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;color&quot;</span><span class="punctuation">:</span><span class="string">&quot;gray&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span><span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;奖励: &quot;</span><span class="punctuation">,</span><span class="attr">&quot;color&quot;</span><span class="punctuation">:</span><span class="string">&quot;green&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span><span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2 绿宝石&quot;</span><span class="punctuation">,</span><span class="attr">&quot;color&quot;</span><span class="punctuation">:</span><span class="string">&quot;white&quot;</span><span class="punctuation">&#125;</span></span><br><span class="line">      <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;frame&quot;</span><span class="punctuation">:</span> <span class="string">&quot;challenge&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;show_toast&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;announce_to_chat&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;hidden&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;rewards&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;function&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ltw:advancement/bonus_3&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;criteria&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;a&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span></span><br><span class="line">          <span class="attr">&quot;trigger&quot;</span><span class="punctuation">:</span> <span class="string">&quot;minecraft:impossible&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></div>

<p><code>data/ltw/advancements/vs/koth4.json</code>：</p>
<div class="highlight-container" data-rel="Json"><figure class="iseeu highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;parent&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ltw:vs/koth3&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;display&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;icon&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;item&quot;</span><span class="punctuation">:</span> <span class="string">&quot;minecraft:pufferfish&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;nbt&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&#123;Enchantments:[&#123;id:\&quot;minecraft:protection\&quot;,lvl:4s&#125;]&#125;&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;山丘之霸 · Ω &quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span><span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;【山丘之王】获得 320 能量值\n&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;color&quot;</span><span class="punctuation">:</span><span class="string">&quot;gray&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span><span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;究极隐藏挑战！&quot;</span><span class="punctuation">,</span><span class="attr">&quot;color&quot;</span><span class="punctuation">:</span><span class="string">&quot;dark_gray&quot;</span><span class="punctuation">,</span><span class="attr">&quot;italic&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">&#125;</span></span><br><span class="line">      <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;frame&quot;</span><span class="punctuation">:</span> <span class="string">&quot;challenge&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;show_toast&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;announce_to_chat&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;hidden&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;rewards&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;function&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ltw:advancement/bonus_4&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;criteria&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;a&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span></span><br><span class="line">          <span class="attr">&quot;trigger&quot;</span><span class="punctuation">:</span> <span class="string">&quot;minecraft:impossible&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></div>

<p>接下来在每次给予玩家能量值时，判定玩家的能量值是否符合获得进度的条件。你无需担心当玩家已经获得了进度后还会获得重复的进度。</p>
<p><code>data/mini/functions/koth/tick5.mcfunction</code>：</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 给予红区玩家能量值</span><br><span class="line">## 此处代码省略</span><br><span class="line"></span><br><span class="line"># 给予进度</span><br><span class="line">advancement grant @a[team=playing,scores=&#123;power_count=100..&#125;] only ltw:vs/koth1</span><br><span class="line">advancement grant @a[team=playing,scores=&#123;power_count=180..&#125;] only ltw:vs/koth2</span><br><span class="line">advancement grant @a[team=playing,scores=&#123;power_count=250..&#125;] only ltw:vs/koth3</span><br><span class="line">advancement grant @a[team=playing,scores=&#123;power_count=320..&#125;] only ltw:vs/koth4</span><br></pre></td></tr></table></figure></div>

<h2 id="第七步-大功告成！"><a href="#第七步-大功告成！" class="headerlink" title="第七步 - 大功告成！"></a>第七步 - 大功告成！</h2><p>输入<code>/reload</code>命令，你的小游戏就大功告成了！并且进度也确实在正常地工作。</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/img/ltwtutor/ltwtutor9.png"
                     
                ></p>
<p>教程结束，期待更多的《游艺街》改版会因此产生！</p>

            </div>

            
                <div class="post-copyright-info">
                    <div class="article-copyright-info-container">
    <ul>
        <li><strong>标题:</strong> 游艺街改版教程 - 添加新的小游戏</li>
        <li><strong>作者:</strong> 小猪之最Thepig</li>
        <li><strong>创建于:</strong> 2023-04-10 23:39:26</li>
        
            <li>
                <strong>更新于:</strong> 2023-04-21 00:00:31
            </li>
        
        <li>
            <strong>链接:</strong> https://www.pigest.top/2023/ltwtutor-e1/
        </li>
        <li>
            <strong>版权声明:</strong> 本文章采用 <a class="license" target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">CC BY-NC-SA 4.0</a> 进行许可。
        </li>
    </ul>
</div>

                </div>
            

            
                <ul class="post-tags-box">
                    
                        <li class="tag-item">
                            <a href="/tags/%E6%95%99%E7%A8%8B/">#教程</a>&nbsp;
                        </li>
                    
                </ul>
            

            

            
                <div class="article-nav">
                    
                        <div class="article-prev">
                            <a class="prev"
                            rel="prev"
                            href="/2023/dhpfix/"
                            >
                                <span class="left arrow-icon flex-center">
                                    <i class="fa-solid fa-chevron-left"></i>
                                </span>
                                <span class="title flex-center">
                                    <span class="post-nav-title-item">Data-pack Helper Plus无法支持1.19.4新特性的临时解决方案</span>
                                    <span class="post-nav-item">上一篇</span>
                                </span>
                            </a>
                        </div>
                    
                    
                        <div class="article-next">
                            <a class="next"
                            rel="next"
                            href="/2023/server/"
                            >
                                <span class="title flex-center">
                                    <span class="post-nav-title-item">游艺街 小猪之最改版服</span>
                                    <span class="post-nav-item">下一篇</span>
                                </span>
                                <span class="right arrow-icon flex-center">
                                    <i class="fa-solid fa-chevron-right"></i>
                                </span>
                            </a>
                        </div>
                    
                </div>
            


            
        </div>

        
            <div class="toc-content-container">
                <div class="post-toc-wrap">
    <div class="post-toc">
        <div class="toc-title">此页目录</div>
        <div class="page-title">游艺街改版教程 - 添加新的小游戏</div>
        <ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%86%99%E5%9C%A8%E5%89%8D%E9%9D%A2"><span class="nav-text">写在前面</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%98%E6%96%B9%E7%9A%84%E5%B0%8F%E6%B8%B8%E6%88%8F%E7%AD%96%E5%88%92%E5%BB%BA%E8%AE%AE"><span class="nav-text">官方的小游戏策划建议</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC%E9%9B%B6%E6%AD%A5-%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C"><span class="nav-text">第零步 - 准备工作</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#A-%E5%B7%A5%E5%85%B7%E5%87%86%E5%A4%87"><span class="nav-text">A. 工具准备</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#B-%E7%AD%96%E5%88%92%E5%B0%8F%E6%B8%B8%E6%88%8F"><span class="nav-text">B. 策划小游戏</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC%E4%B8%80%E6%AD%A5-%E5%B0%8F%E6%B8%B8%E6%88%8F%E5%9C%BA%E6%99%AF%E7%9A%84%E5%A4%84%E7%90%86"><span class="nav-text">第一步 - 小游戏场景的处理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC%E4%BA%8C%E6%AD%A5-%E5%B0%8F%E6%B8%B8%E6%88%8F%E5%9F%BA%E7%A1%80%E6%A1%86%E6%9E%B6%E7%BC%96%E5%86%99"><span class="nav-text">第二步 - 小游戏基础框架编写</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#A-%E6%96%B0%E5%BB%BA%E6%96%87%E4%BB%B6%E5%A4%B9%EF%BC%81"><span class="nav-text">A. 新建文件夹！</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#B-%E5%BA%94%E8%AF%A5%E5%86%99%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="nav-text">B. 应该写什么？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#C-%E6%B8%B8%E6%88%8F%E5%BC%80%E5%A7%8B%E5%89%8D%E7%9A%84%E6%93%8D%E4%BD%9C"><span class="nav-text">C. 游戏开始前的操作</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#D-%E6%B8%B8%E6%88%8F%E5%BC%80%E5%A7%8B%E6%97%B6%E7%9A%84%E6%93%8D%E4%BD%9C"><span class="nav-text">D. 游戏开始时的操作</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#E-%E6%B8%B8%E6%88%8F%E7%BB%93%E6%9D%9F%E6%97%B6%E7%9A%84%E6%93%8D%E4%BD%9C"><span class="nav-text">E. 游戏结束时的操作</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC%E4%B8%89%E6%AD%A5-%E5%B0%8F%E6%B8%B8%E6%88%8F%E4%BA%8B%E4%BB%B6%E7%BC%96%E5%86%99"><span class="nav-text">第三步 - 小游戏事件编写</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#A-%E5%89%A9%E4%BD%9910s%E6%97%B6%E7%9A%84%E5%80%92%E8%AE%A1%E6%97%B6%E6%98%BE%E7%A4%BA"><span class="nav-text">A. 剩余10s时的倒计时显示</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#B-%E5%80%92%E8%AE%A1%E6%97%B6%E4%BA%8B%E4%BB%B6"><span class="nav-text">B. 倒计时事件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#C-%E8%83%BD%E9%87%8F%E5%80%BC%E7%9A%84%E7%BB%99%E4%BA%88"><span class="nav-text">C. 能量值的给予</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#D-%E6%B8%B8%E6%88%8F%E7%89%A9%E5%93%81%E7%9A%84%E7%BB%99%E4%BA%88"><span class="nav-text">D. 游戏物品的给予</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#E-%E5%A5%96%E5%8A%B1%E7%89%A9%E5%93%81%E7%9A%84%E7%94%9F%E6%88%90%E4%B8%8E%E5%A4%84%E7%90%86"><span class="nav-text">E. 奖励物品的生成与处理</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC%E5%9B%9B%E6%AD%A5-%E5%88%9D%E6%AD%A5%E6%B5%8B%E8%AF%95"><span class="nav-text">第四步 - 初步测试</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC%E4%BA%94%E6%AD%A5-%E5%B0%86%E6%96%B0%E6%B8%B8%E6%88%8F%E5%8A%A0%E5%85%A5%E9%9A%8F%E6%9C%BA%E6%B1%A0"><span class="nav-text">第五步 - 将新游戏加入随机池</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC%E5%85%AD%E6%AD%A5-%E6%B7%BB%E5%8A%A0%E8%BF%9B%E5%BA%A6"><span class="nav-text">第六步 - 添加进度</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC%E4%B8%83%E6%AD%A5-%E5%A4%A7%E5%8A%9F%E5%91%8A%E6%88%90%EF%BC%81"><span class="nav-text">第七步 - 大功告成！</span></a></li></ol>

    </div>
</div>
            </div>
        
    </div>
</div>


                

            </div>
            
            

        </div>

        <div class="main-content-footer">
            <footer class="footer">
    <div class="info-container">
        <div class="copyright-info">
            &copy;
            
              <span>2023</span>
              -
            
            2023&nbsp;&nbsp;<i class="fa-solid fa-heart fa-beat" style="--fa-animation-duration: 0.5s; color: #f54545"></i>&nbsp;&nbsp;<a href="/">小猪之最Thepig</a>
        </div>
        
            <script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
            <div class="website-count info-item">
                
                    <span id="busuanzi_container_site_uv" class="busuanzi_container_site_uv">
                        访问人数&nbsp;<span id="busuanzi_value_site_uv" class="busuanzi_value_site_uv"></span>
                    </span>
                
                
                    <span id="busuanzi_container_site_pv" class="busuanzi_container_site_pv">
                        总访问量&nbsp;<span id="busuanzi_value_site_pv" class="busuanzi_value_site_pv"></span>
                    </span>
                
            </div>
        
        <div class="theme-info info-item">
            <span class="powered-by-container">由 <?xml version="1.0" encoding="utf-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg version="1.1" id="圖層_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1rem" height="1rem" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve"><path fill="#0E83CD" d="M256.4,25.8l-200,115.5L56,371.5l199.6,114.7l200-115.5l0.4-230.2L256.4,25.8z M349,354.6l-18.4,10.7l-18.6-11V275H200v79.6l-18.4,10.7l-18.6-11v-197l18.5-10.6l18.5,10.8V237h112v-79.6l18.5-10.6l18.5,10.8V354.6z"/></svg><a target="_blank" href="https://hexo.io">Hexo</a> 驱动</span>
                <br>
            <span class="theme-version-container">主题&nbsp;<a class="theme-version" target="_blank" href="https://github.com/EvanNotFound/hexo-theme-redefine">Redefine v2.1.0</a>
        </div>
        
        
        
            <div id="start_div" style="display:none">
                2023/4/3 11:45:14
            </div>
            <div>
                博客已运行 <span class="odometer" id="runtime_days" ></span> 天 <span class="odometer" id="runtime_hours"></span> 小时 <span class="odometer" id="runtime_minutes"></span> 分钟 <span class="odometer" id="runtime_seconds"></span> 秒
            </div>
        
        
        
            <script async data-pjax>
                try {
                    function odometer_init() {
                    const elements = document.querySelectorAll('.odometer');
                    elements.forEach(el => {
                        new Odometer({
                            el,
                            format: '( ddd).dd',
                            duration: 200
                        });
                    });
                    }
                    odometer_init();
                } catch (error) {}
            </script>
        
        
        
    </div>  
</footer>
        </div>
    </div>

    
        <div class="post-tools">
            <div class="post-tools-container">
    <ul class="article-tools-list">
        <!-- TOC aside toggle -->
        
            <li class="right-bottom-tools page-aside-toggle">
                <i class="fa-regular fa-outdent"></i>
            </li>
        

        <!-- go comment -->
        
    </ul>
</div>

        </div>
    

    <div class="right-side-tools-container">
        <div class="side-tools-container">
    <ul class="hidden-tools-list">
        <li class="right-bottom-tools tool-font-adjust-plus flex-center">
            <i class="fa-regular fa-magnifying-glass-plus"></i>
        </li>

        <li class="right-bottom-tools tool-font-adjust-minus flex-center">
            <i class="fa-regular fa-magnifying-glass-minus"></i>
        </li>

        <li class="right-bottom-tools tool-expand-width flex-center">
            <i class="fa-regular fa-expand"></i>
        </li>

        <li class="right-bottom-tools tool-dark-light-toggle flex-center">
            <i class="fa-regular fa-moon"></i>
        </li>

        <!-- rss -->
        

        

        <li class="right-bottom-tools tool-scroll-to-bottom flex-center">
            <i class="fa-regular fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="visible-tools-list">
        <li class="right-bottom-tools toggle-tools-list flex-center">
            <i class="fa-regular fa-cog fa-spin"></i>
        </li>
        
            <li class="right-bottom-tools tool-scroll-to-top flex-center">
                <i class="arrow-up fas fa-arrow-up"></i>
                <span class="percent"></span>
            </li>
        
    </ul>
</div>

    </div>

    <div class="image-viewer-container">
    <img src="">
</div>


    
        <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
          <span class="search-input-field-pre">
            <i class="fa-solid fa-keyboard"></i>
          </span>
            <div class="search-input-container">
                <input autocomplete="off"
                       autocorrect="off"
                       autocapitalize="off"
                       placeholder="搜索..."
                       spellcheck="false"
                       type="search"
                       class="search-input"
                >
            </div>
            <span class="popup-btn-close">
                <i class="fa-solid fa-times"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fa-solid fa-spinner fa-spin-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>

    


</main>




<script src="/js/utils.js"></script>

<script src="/js/main.js"></script>

<script src="/js/layouts/navbarShrink.js"></script>

<script src="/js/tools/scrollTopBottom.js"></script>

<script src="/js/tools/lightDarkSwitch.js"></script>



    
<script src="/js/tools/localSearch.js"></script>




    
<script src="/js/tools/codeBlock.js"></script>




    
<script src="/js/layouts/lazyload.js"></script>




    
<script src="/js/tools/runtime.js"></script>

    
<script src="/js/layouts/odometer.min.js"></script>

    
<link rel="stylesheet" href="/assets/odometer-theme-minimal.css">




  
<script src="/js/libs/Typed.min.js"></script>

  
<script src="/js/plugins/typed.js"></script>







<div class="post-scripts pjax">
    
        
<script src="/js/tools/tocToggle.js"></script>

<script src="/js/libs/anime.min.js"></script>

<script src="/js/layouts/toc.js"></script>

<script src="/js/plugins/tabs.js"></script>

    
</div>


    
<script src="/js/libs/pjax.min.js"></script>

<script>
    window.addEventListener('DOMContentLoaded', () => {
        window.pjax = new Pjax({
            selectors: [
                'head title',
                '.page-container',
                '.pjax'
            ],
            history: true,
            debug: false,
            cacheBust: false,
            timeout: 0,
            analytics: false,
            currentUrlFullReload: false,
            scrollRestoration: false,
            // scrollTo: true,
        });

        document.addEventListener('pjax:send', () => {
            Global.utils.pjaxProgressBarStart();
        });

        document.addEventListener('pjax:complete', () => {
            Global.utils.pjaxProgressBarEnd();
            window.pjax.executeScripts(document.querySelectorAll('script[data-pjax], .pjax script'));
            Global.refresh();
        });
    });
</script>




</body>
</html>
